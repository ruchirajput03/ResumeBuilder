{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ruchi/OneDrive/Desktop/ResumeBuilderApp/ResumeBuilder/frontend/src/app/admin/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n// Removed PDFViewer import since we're opening PDFs directly\r\n\r\nconst apiUrl = process.env.API_URL;\r\n\r\ninterface Resume {\r\n  _id: string;\r\n  file: string;\r\n  status: \"pending\" | \"approved\" | \"rejected\";\r\n  userId?: {\r\n    name?: string;\r\n    email?: string;\r\n  };\r\n}\r\n\r\nexport default function Resumes() {\r\n  const [resumes, setResumes] = useState<Resume[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  // Removed viewingPDF state since we're opening PDFs directly\r\n\r\n  useEffect(() => {\r\n    const fetchResumes = async () => {\r\n      try {\r\n        const response = await axios.get(`${apiUrl}auth/all`);\r\n        setResumes(response.data.data);\r\n      } catch (err) {\r\n        console.error(\"Fetch error:\", err);\r\n        setError(\"Failed to load resumes\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchResumes();\r\n  }, []);\r\n\r\n  const updateStatus = async (id: string, status: \"approved\" | \"rejected\") => {\r\n    try {\r\n      const response = await axios.patch(`${apiUrl}auth/${id}/status`, { status });\r\n\r\n      setResumes((prev) =>\r\n        prev.map((r) => (r._id === id ? response.data.data : r))\r\n      );\r\n    } catch (err) {\r\n      console.error(\"Status update error:\", err);\r\n      alert(\"Failed to update status\");\r\n    }\r\n  };\r\n\r\n  const handleViewPDF = (filePath: string) => {\r\n    const fullUrl = `http://localhost:8000${filePath}`;\r\n    // Open PDF directly in new tab instead of using PDF viewer\r\n    window.open(fullUrl, '_blank');\r\n  };\r\n\r\n  // Removed closePDFViewer function since we're opening PDFs directly\r\n\r\n  if (loading) return <div className=\"p-5\">Loading...</div>;\r\n  if (error) return <div className=\"p-5 text-red-500\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"p-5\">\r\n      <h1 className=\"text-2xl font-bold mb-5\">All Uploaded Resumes</h1>\r\n\r\n      {resumes.length === 0 ? (\r\n        <p>No resumes found.</p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-4 gap-4\">\r\n          {resumes.map((resume) => (\r\n            <div\r\n              key={resume._id}\r\n              className=\"border border-gray-300 p-4 rounded-lg shadow-sm\"\r\n            >\r\n              <p className=\"mb-2\"><span className=\"font-bold\">User:</span> {resume.userId?.name || \"Unknown\"}</p>\r\n              <p className=\"mb-2\"><span className=\"font-bold\">Email:</span> {resume.userId?.email || \"Unknown\"}</p>\r\n              <p className=\"mb-2\">\r\n                <span className=\"font-bold\">Status:</span>{\" \"}\r\n                <span className={`font-bold ${\r\n                  resume.status === \"approved\"\r\n                    ? \"text-green-600\"\r\n                    : resume.status === \"rejected\"\r\n                    ? \"text-red-600\"\r\n                    : \"text-orange-600\"\r\n                }`}>\r\n                  {resume.status}\r\n                </span>\r\n              </p>\r\n              <p className=\"mb-4\"><span className=\"font-bold\">File:</span> {resume.file}</p>\r\n\r\n              <div className=\"space-y-2\">\r\n                <button\r\n                  onClick={() => handleViewPDF(resume.file)}\r\n                  className=\"w-full bg-blue-500 text-white px-4 py-2 rounded border-none cursor-pointer hover:bg-blue-600\"\r\n                >\r\n                  View PDF\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => updateStatus(resume._id, \"approved\")}\r\n                  disabled={resume.status === \"approved\"}\r\n                  className={`w-full px-4 py-2 rounded border-none text-white ${\r\n                    resume.status === \"approved\"\r\n                      ? \"bg-gray-400 cursor-not-allowed\"\r\n                      : \"bg-green-500 cursor-pointer hover:bg-green-600\"\r\n                  }`}\r\n                >\r\n                  Approve\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => updateStatus(resume._id, \"rejected\")}\r\n                  disabled={resume.status === \"rejected\"}\r\n                  className={`w-full px-4 py-2 rounded border-none text-white ${\r\n                    resume.status === \"rejected\"\r\n                      ? \"bg-gray-400 cursor-not-allowed\"\r\n                      : \"bg-red-500 cursor-pointer hover:bg-red-600\"\r\n                  }`}\r\n                >\r\n                  Reject\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAIA,6DAA6D;AAE7D,MAAM;AAYS,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,6DAA6D;IAE7D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,GAAG,OAAO,QAAQ,CAAC;gBACpD,WAAW,SAAS,IAAI,CAAC,IAAI;YAC/B,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,SAAS;YACX,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,eAAe,OAAO,IAAY;QACtC,IAAI;YACF,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,KAAK,CAAC,GAAG,OAAO,KAAK,EAAE,GAAG,OAAO,CAAC,EAAE;gBAAE;YAAO;YAE1E,WAAW,CAAC,OACV,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,GAAG,KAAK,KAAK,SAAS,IAAI,CAAC,IAAI,GAAG;QAEzD,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM;QACR;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,MAAM,UAAU,CAAC,qBAAqB,EAAE,UAAU;QAClD,2DAA2D;QAC3D,OAAO,IAAI,CAAC,SAAS;IACvB;IAEA,oEAAoE;IAEpE,IAAI,SAAS,qBAAO,8OAAC;QAAI,WAAU;kBAAM;;;;;;IACzC,IAAI,OAAO,qBAAO,8OAAC;QAAI,WAAU;kBAAoB;;;;;;IAErD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,QAAQ,MAAM,KAAK,kBAClB,8OAAC;0BAAE;;;;;qCAEH,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAE,WAAU;;kDAAO,8OAAC;wCAAK,WAAU;kDAAY;;;;;;oCAAY;oCAAE,OAAO,MAAM,EAAE,QAAQ;;;;;;;0CACrF,8OAAC;gCAAE,WAAU;;kDAAO,8OAAC;wCAAK,WAAU;kDAAY;;;;;;oCAAa;oCAAE,OAAO,MAAM,EAAE,SAAS;;;;;;;0CACvF,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;wCAAK,WAAU;kDAAY;;;;;;oCAAe;kDAC3C,8OAAC;wCAAK,WAAW,CAAC,UAAU,EAC1B,OAAO,MAAM,KAAK,aACd,mBACA,OAAO,MAAM,KAAK,aAClB,iBACA,mBACJ;kDACC,OAAO,MAAM;;;;;;;;;;;;0CAGlB,8OAAC;gCAAE,WAAU;;kDAAO,8OAAC;wCAAK,WAAU;kDAAY;;;;;;oCAAY;oCAAE,OAAO,IAAI;;;;;;;0CAEzE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS,IAAM,cAAc,OAAO,IAAI;wCACxC,WAAU;kDACX;;;;;;kDAID,8OAAC;wCACC,SAAS,IAAM,aAAa,OAAO,GAAG,EAAE;wCACxC,UAAU,OAAO,MAAM,KAAK;wCAC5B,WAAW,CAAC,gDAAgD,EAC1D,OAAO,MAAM,KAAK,aACd,mCACA,kDACJ;kDACH;;;;;;kDAID,8OAAC;wCACC,SAAS,IAAM,aAAa,OAAO,GAAG,EAAE;wCACxC,UAAU,OAAO,MAAM,KAAK;wCAC5B,WAAW,CAAC,gDAAgD,EAC1D,OAAO,MAAM,KAAK,aACd,mCACA,8CACJ;kDACH;;;;;;;;;;;;;uBA/CE,OAAO,GAAG;;;;;;;;;;;;;;;;AAyD7B","debugId":null}}]
}