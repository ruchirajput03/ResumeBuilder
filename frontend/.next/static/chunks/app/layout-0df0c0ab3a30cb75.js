(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1115:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>n});var r=a(5155),s=a(2115),l=a(5695);let o=(0,s.createContext)(void 0),n=e=>{let{children:t}=e,[a,n]=(0,s.useState)(null),i=(0,l.useRouter)();return(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&n(JSON.parse(e))},[]),(0,r.jsx)(o.Provider,{value:{user:a,login:e=>{n(e),localStorage.setItem("user",JSON.stringify(e)),i.push("admin"===e.role?"/admin":"/dashboard")},logout:()=>{n(null),localStorage.removeItem("user"),i.push("/login")},isAuthenticated:!!a},children:t})}},1435:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(5155),s=a(2115),l=a(5695),o=a(4540),n=a(8990);function i(e){let{children:t}=e,a=(0,l.useRouter)(),i=(0,o.wA)(),{user:d,isLoading:u}=(0,o.d4)(e=>e.auth),[c,h]=(0,s.useState)(!0),[m,g]=(0,s.useState)(0);return(console.log(d,"checking user available"),(0,s.useEffect)(()=>{let e=async()=>{try{d?console.log("we have already admin details"):(console.log("can't find the admin now i am fetching admin details"),await i((0,n.im)()).unwrap()),h(!1)}catch(e){console.log(e),m<3?setTimeout(()=>{g(e=>e+1)},1e3):(console.log(d),h(!1),a.push("/login"))}};c?e():console.log("can't check becouse limit exceed")},[d,i,a,c,m]),c||u)?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#215979]"})}):(0,r.jsx)(r.Fragment,{children:t})}},2262:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155),s=a(3783),l=a(2098),o=a(3509),n=a(6874),i=a.n(n),d=a(2984),u=a(7740);function c(){let{theme:e,toggleTheme:t}=(0,u.D)();return(0,r.jsxs)(d.P.header,{className:"flex items-center justify-between px-6 py-4 shadow-md sticky top-0 z-50",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(s.A,{className:"icon w-5 h-5"}),(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Resume Builder"})]}),(0,r.jsxs)("nav",{className:"flex gap-6 text-sm md:text-base",children:[(0,r.jsx)(i(),{href:"/",className:"hover:[color:var(--link-hover)]",children:"Dashboard"}),(0,r.jsx)(i(),{href:"/admin",className:"hover:[color:var(--link-hover)]",children:"Admin"}),(0,r.jsx)(i(),{href:"/login",className:"hover:[color:var(--link-hover)]",children:"Login"}),(0,r.jsx)(i(),{href:"/register",className:"hover:[color:var(--link-hover)]",children:"Register"})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 rounded-full bg-[var(--card-bg)]",children:"dark"===e?(0,r.jsx)(l.A,{className:"w-5 h-5 text-yellow-500"}):(0,r.jsx)(o.A,{className:"w-5 h-5 text-gray-800"})})]})}},3378:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(5155),s=a(4540),l=a(1990),o=a(8990);let n=(0,l.U1)({reducer:{auth:o.Ay},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}}),devTools:!1}),i=e=>{let{children:t}=e;return(0,r.jsx)(s.Kq,{store:n,children:t})}},4927:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2093,23)),Promise.resolve().then(a.t.bind(a,7735,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,1435)),Promise.resolve().then(a.bind(a,3378)),Promise.resolve().then(a.bind(a,6996)),Promise.resolve().then(a.bind(a,2262)),Promise.resolve().then(a.bind(a,1115)),Promise.resolve().then(a.bind(a,7740))},6996:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(5155),s=a(2984);function l(){return(0,r.jsxs)(s.P.footer,{className:" text-center text-sm py-4 border-t ",initial:{opacity:0},animate:{opacity:1},children:["\xa9 ",new Date().getFullYear()," Resume Builder. All rights reserved."]})}},7740:(e,t,a)=>{"use strict";a.d(t,{D:()=>n,ThemeProvider:()=>o});var r=a(5155),s=a(2115);let l=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,s.useState)("light"),[n,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{i(!0);let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=e||(t?"dark":"light");o(a),document.documentElement.classList.toggle("dark","dark"===a)},[]),(0,s.useEffect)(()=>{n&&(document.documentElement.classList.toggle("dark","dark"===a),localStorage.setItem("theme",a))},[a,n]),(0,r.jsx)(l.Provider,{value:{theme:a,toggleTheme:()=>{o(e=>"light"===e?"dark":"light")}},children:n?t:(0,r.jsx)("div",{children:"Loading..."})})},n=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},8990:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>y,DY:()=>o,ET:()=>c,H$:()=>p,Kc:()=>f,Lx:()=>n,ZB:()=>k,ck:()=>x,im:()=>i,jc:()=>g,mB:()=>v});var r=a(1990),s=a(3464);let l={user:null,token:localStorage.getItem("token"),isLoading:!1,isAuthenticated:!1,error:null,message:null},o=(0,r.zD)("auth/register",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await s.A.post("".concat("http://localhost:8000/api/","auth/register"),e,{withCredentials:!0}),a=t.data.data||t.data.user,r=t.data.token||"dummy-token";return r&&localStorage.setItem("token",r),{user:a,token:r}}catch(e){var r,l;return a((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Registration failed")}}),n=(0,r.zD)("auth/login",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await s.A.post("".concat("http://localhost:8000/api/","auth/login"),e,{withCredentials:!0}),a=t.data.data,r=t.data.token||"dummy-token";return r&&localStorage.setItem("token",r),{user:a,token:r}}catch(e){var r,l;return a((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Login failed")}}),i=(0,r.zD)("auth/fetchUser",async(e,t)=>{let{rejectWithValue:a}=t;try{let e=localStorage.getItem("token"),t=await s.A.get("".concat("http://localhost:8000/api/","auth/"),{withCredentials:!0,headers:e?{Authorization:"Bearer ".concat(e)}:{}});return{user:t.data.data||t.data.user||t.data}}catch(e){var r,l;return a((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Failed to get profile")}}),d=(0,r.Z0)({name:"auth",initialState:l,reducers:{clearAuth:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,e.message=null,localStorage.removeItem("token")},clearError:e=>{e.error=null},clearMessage:e=>{e.message=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,localStorage.setItem("token",t.payload.token)}},extraReducers:e=>{e.addCase(o.pending,e=>{e.isLoading=!0,e.error=null,e.message=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.message="Registration successful",e.error=null}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload||"Registration failed",e.isAuthenticated=!1}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null,e.message=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.message="Login successful",e.error=null}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload||"Login failed",e.isAuthenticated=!1}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload||"Failed to get profile",e.isAuthenticated=!1})}}),{clearAuth:u,clearError:c,clearMessage:h,setCredentials:m}=d.actions,g=e=>e.auth,v=e=>e.auth.user,f=e=>e.auth.isAuthenticated,p=e=>e.auth.isLoading,k=e=>e.auth.error,x=e=>{var t;return null==(t=e.auth.user)?void 0:t.role},y=d.reducer}},e=>{e.O(0,[360,464,635,813,505,441,964,358],()=>e(e.s=4927)),_N_E=e.O()}]);