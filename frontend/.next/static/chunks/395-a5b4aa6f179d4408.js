(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{5668:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var r=a(5155),s=a(2115),l=a(4540),n=a(2984),i=a(9946);let o=(0,i.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),d=(0,i.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=a(7434);let u=(0,i.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p=(0,i.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),x=["light","dark","ocean","forest"];function h(e){let{onChange:t}=e,[a,l]=(0,s.useState)("light");return(0,r.jsxs)(n.P.div,{className:"flex gap-3 flex-wrap items-center",initial:{opacity:0},animate:{opacity:1},children:[(0,r.jsx)("span",{className:"font-medium",children:"Select Theme:"}),x.map(e=>(0,r.jsx)("button",{onClick:()=>{l(e),t(e)},className:"px-3 py-1 rounded-full border text-sm capitalize ".concat(a===e?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-gray-100"),children:e},e))]})}let m={light:"bg-white text-black border-gray-200",dark:"bg-gray-800 text-white border-gray-600",ocean:"bg-blue-100 text-blue-900 border-blue-400",forest:"bg-green-100 text-green-900 border-green-400"};function g(e){let{fileUrl:t}=e,l=(0,s.useRef)(null),[n,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),[p,x]=(0,s.useState)(1),[h,m]=(0,s.useState)(0),[g,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await a.e(84).then(a.bind(a,3824)),t=["/pdf.worker.min.js","https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(e.version,"/pdf.worker.min.js"),"https://unpkg.com/pdfjs-dist@".concat(e.version,"/build/pdf.worker.min.js")],r=!1;for(let a of t)try{e.GlobalWorkerOptions.workerSrc=a,r=!0;break}catch(e){console.log(e),console.warn("Failed to set worker: ".concat(a))}r||console.warn("No worker could be set, PDF.js might not work properly"),u(e)}catch(e){console.error("Failed to load PDF.js:",e),i("Failed to load PDF library")}})()},[]);let y=async e=>{if(g)try{let t=await g.getPage(e),a=t.getViewport({scale:1.2}),r=l.current;if(!r)return void i("Canvas not available");let s=r.getContext("2d");if(!s)return void i("Could not get canvas context");r.height=a.height,r.width=a.width,await t.render({canvasContext:s,viewport:a}).promise}catch(t){let e=t instanceof Error?t.message:"Unknown error";console.error("Error rendering page:",t),i("Failed to render page: ".concat(e))}};(0,s.useEffect)(()=>{c&&t&&(async()=>{try{d(!0),i(null);let e=c.getDocument({url:t,verbosity:0,httpHeaders:{"Access-Control-Allow-Origin":"*"}}),a=await e.promise;f(a),m(a.numPages),x(1);let r=await a.getPage(1),s=r.getViewport({scale:1.2}),n=l.current;if(!n)return void i("Canvas not available");let o=n.getContext("2d");if(!o)return void i("Could not get canvas context");n.height=s.height,n.width=s.width,await r.render({canvasContext:o,viewport:s}).promise,d(!1)}catch(t){let e=t instanceof Error?t.message:"Unknown error";console.error("Error loading PDF:",t),i("Failed to load PDF: ".concat(e)),d(!1)}})()},[c,t]);let b=e=>{e>=1&&e<=h&&(x(e),y(e))};return c?(0,r.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o&&(0,r.jsx)("div",{style:{padding:"20px",textAlign:"center",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"10px"},children:"Loading PDF..."}),n&&(0,r.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"4px",margin:"10px 0"},children:[(0,r.jsx)("p",{children:n}),(0,r.jsxs)("p",{children:["Try opening directly:",(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline",marginLeft:"5px"},children:"Open PDF"})]})]}),h>0&&(0,r.jsxs)("div",{style:{padding:"10px",textAlign:"center",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"10px",backgroundColor:"#f8f9fa"},children:[(0,r.jsx)("button",{onClick:()=>b(p-1),disabled:p<=1,style:{padding:"5px 10px",marginRight:"10px",backgroundColor:p<=1?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:p<=1?"not-allowed":"pointer"},children:"Previous"}),(0,r.jsxs)("span",{style:{margin:"0 15px",fontWeight:"bold"},children:["Page ",p," of ",h]}),(0,r.jsx)("button",{onClick:()=>b(p+1),disabled:p>=h,style:{padding:"5px 10px",marginLeft:"10px",backgroundColor:p>=h?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:p>=h?"not-allowed":"pointer"},children:"Next"})]}),(0,r.jsx)("canvas",{ref:l,style:{border:"1px solid #000",maxWidth:"100%",display:n?"none":"block",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"}})]}):(0,r.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"Loading PDF library..."})}var f=a(8990);function y(e){return"object"==typeof e&&null!==e&&"_id"in e}function b(e){return y(e)&&"file"in e&&"string"==typeof e.file}function j(){let[e,t]=(0,s.useState)("light"),[a,i]=(0,s.useState)(!1),x=(0,l.wA)(),j=(0,l.d4)(f.mB),v=(0,l.d4)(f.H$),k=(0,l.d4)(f.ZB),w=(0,l.d4)(f.Kc),N=e=>e.startsWith("http")?e:"".concat("http://localhost:8000/api/").concat(e);return((0,s.useEffect)(()=>{w&&!j&&x((0,f.im)())},[x,w,j]),a&&(null==j?void 0:j.resume)&&y(j.resume)&&b(j.resume))?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Resume Preview"}),(0,r.jsx)("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700 text-xl font-bold",children:"\xd7"})]}),(0,r.jsx)("div",{className:"p-4 overflow-auto max-h-[calc(90vh-80px)]",children:(0,r.jsx)(g,{fileUrl:N(j.resume.file)})})]})}):(0,r.jsxs)(n.P.div,{className:"p-6 rounded-xl shadow-md space-y-4 h-full",initial:{opacity:0,x:50},animate:{opacity:1,x:0},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"w-5 h-5"})," Resume Preview"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[j&&(0,r.jsx)("span",{className:"text-sm text-gray-600",children:j.name}),(0,r.jsx)(h,{onChange:t})]})]}),(0,r.jsx)("div",{className:"rounded-lg border p-4 h-96 flex items-center justify-center transition-all duration-300 ease-in-out ".concat(m[e]),children:(()=>{if(v)return(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(o,{className:"w-5 h-5 animate-spin"}),(0,r.jsx)("p",{className:"text-sm opacity-80",children:"Loading resume..."})]});if(k)return(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-red-500",children:[(0,r.jsx)(d,{className:"w-5 h-5"}),(0,r.jsxs)("p",{className:"text-sm",children:["Error loading resume: ",k]})]});if(!w)return(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-sm opacity-80",children:"Please log in to view your resume"})});if(null==j?void 0:j.resume){let e,t=!1;return"string"==typeof j.resume?e=j.resume:b(j.resume)?(e=j.resume.file,t=j.resume.file.toLowerCase().endsWith(".pdf")):e=JSON.stringify(j.resume,null,2),(0,r.jsxs)("div",{className:"text-left space-y-4 overflow-auto max-h-full",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Resume Content:"}),y(j.resume)?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-50 dark:bg-gray-800 p-2 rounded",children:[(0,r.jsx)("strong",{children:"Resume ID:"})," ",j.resume._id]}),b(j.resume)?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 text-blue-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:j.resume.file.split("/").pop()||"Resume File"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[t&&(0,r.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",children:[(0,r.jsx)(u,{className:"w-3 h-3"}),"Preview"]}),(0,r.jsxs)("a",{href:N(j.resume.file),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition-colors",children:[(0,r.jsx)(p,{className:"w-3 h-3"}),"Open"]})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["File Path: ",(0,r.jsx)("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:j.resume.file})]})]}):(0,r.jsxs)("div",{className:"text-xs bg-gray-50 dark:bg-gray-800 p-3 rounded",children:[(0,r.jsx)("div",{className:"font-medium",children:"Resume Object:"}),(0,r.jsx)("pre",{className:"mt-1 text-xs",children:e})]})]}):(0,r.jsx)("div",{className:"text-xs bg-gray-50 dark:bg-gray-800 p-3 rounded whitespace-pre-wrap",children:e})]})}return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm opacity-80",children:"No resume found. Upload or create your resume to see the preview."}),(0,r.jsxs)("p",{className:"text-xs opacity-60 mt-2",children:["Theme: ",(0,r.jsx)("strong",{children:e})]})]})})()}),!1]})}},6665:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(5155),s=a(2115),l=a(2984),n=a(9946);let i=(0,n.A)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var o=a(7434);let d=(0,n.A)("pencil-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);var c=a(3464);function u(){let[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(!1),u=(0,s.useRef)(null),p=e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];r&&"application/pdf"===r.type?(t(r),n(!1)):alert("Please upload a valid PDF file.")},x=async()=>{if(!e)return;let t=new FormData;t.append("resume",e);try{let e=await c.A.post("".concat("http://localhost:8000/api/","resume/upload"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log("✅ Upload success:",e.data),alert("Resume uploaded successfully!")}catch(e){var a,r;console.error("❌ Upload failed:",e),alert((null==(r=e.response)||null==(a=r.data)?void 0:a.message)||"Upload failed")}},h=()=>{var e;null==(e=u.current)||e.click()};return(0,r.jsxs)(l.P.div,{className:"p-6 rounded-xl shadow-md space-y-4",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,r.jsx)(i,{className:"w-5 h-5"})," Upload / Edit Resume"]}),!e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",accept:"application/pdf",onChange:p,ref:u,className:"hidden"}),(0,r.jsx)("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Upload Resume"})]}),e&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 rounded-md",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),e.name]}),(0,r.jsxs)("button",{onClick:()=>n(!0),className:"text-blue-600 hover:underline text-sm flex items-center gap-1",children:[(0,r.jsx)(d,{className:"w-4 h-4"})," Edit"]})]}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",accept:"application/pdf",onChange:p,ref:u,className:"hidden"}),(0,r.jsx)("button",{onClick:h,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md",children:"Choose New Resume"})]}),(0,r.jsx)("button",{onClick:x,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md w-full",children:"Upload Now"})]})]})}},7434:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8395:(e,t,a)=>{Promise.resolve().then(a.bind(a,5668)),Promise.resolve().then(a.bind(a,6665))},8990:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>j,DY:()=>n,ET:()=>u,H$:()=>f,Kc:()=>g,Lx:()=>i,ZB:()=>y,ck:()=>b,im:()=>o,jc:()=>h,mB:()=>m});var r=a(1990),s=a(3464);let l={user:null,token:localStorage.getItem("token"),isLoading:!1,isAuthenticated:!1,error:null,message:null},n=(0,r.zD)("auth/register",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await s.A.post("".concat("http://localhost:8000/api/","auth/register"),e,{withCredentials:!0}),a=t.data.data||t.data.user,r=t.data.token||"dummy-token";return r&&localStorage.setItem("token",r),{user:a,token:r}}catch(e){var r,l;return a((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Registration failed")}}),i=(0,r.zD)("auth/login",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await s.A.post("".concat("http://localhost:8000/api/","auth/login"),e,{withCredentials:!0}),a=t.data.data,r=t.data.token||"dummy-token";return r&&localStorage.setItem("token",r),{user:a,token:r}}catch(e){var r,l;return a((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Login failed")}}),o=(0,r.zD)("auth/fetchUser",async(e,t)=>{let{rejectWithValue:a}=t;try{let e=localStorage.getItem("token"),t=await s.A.get("".concat("http://localhost:8000/api/","auth/"),{withCredentials:!0,headers:e?{Authorization:"Bearer ".concat(e)}:{}});return{user:t.data.data||t.data.user||t.data}}catch(e){var r,l;return a((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Failed to get profile")}}),d=(0,r.Z0)({name:"auth",initialState:l,reducers:{clearAuth:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,e.message=null,localStorage.removeItem("token")},clearError:e=>{e.error=null},clearMessage:e=>{e.message=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,localStorage.setItem("token",t.payload.token)}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null,e.message=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.message="Registration successful",e.error=null}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload||"Registration failed",e.isAuthenticated=!1}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null,e.message=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.message="Login successful",e.error=null}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload||"Login failed",e.isAuthenticated=!1}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload||"Failed to get profile",e.isAuthenticated=!1})}}),{clearAuth:c,clearError:u,clearMessage:p,setCredentials:x}=d.actions,h=e=>e.auth,m=e=>e.auth.user,g=e=>e.auth.isAuthenticated,f=e=>e.auth.isLoading,y=e=>e.auth.error,b=e=>{var t;return null==(t=e.auth.user)?void 0:t.role},j=d.reducer}}]);